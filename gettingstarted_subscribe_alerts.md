# Subscribing to Alert Data
This guide introduces how to configure alert data subscription on EnOS Console and consume alert data with the Java SDK provided by EnOS.

## Prerequisites
- An account to log in EnOS Console.
- Access permission to the Data Subscription module.
- Device connection is completed, and the devices are uploading data to EnOS.
- A workstation with IDE (IDEA or Eclipse) installed.

## About This Task
**Goal**

The goal of this guide is to configure subscription to the alert data of measure point *test_raw*.

**Data Preparation**

- **Model configuration**: Detailed information about the (*testModel*) for this guide is as follows：

| Feature Type  | Name     | Identifier | Point Type | Data Type |
| ------------- | -------- | ---------- | ---------- | --------- |
| Measure Point | test_raw | test_raw   | AI         | DOUBLE    |

- **Data ingestion**: *test_raw* is the measure point for alert data ingestion. For information about data ingestion of input point *test_raw*, see [Device Connection](https://www.envisioniot.com/docs/device-connection/en/latest/gettingstarted_device_connection.html).
- **Alert Configuration**: For information about asset alert configuration, see [Alert Management](https://www.envisioniot.com/docs/event-management/en/latest/alert_overview.html).

## Procedure
The steps for subscribing and consuming alert data are as follows:
- Create and configure an alert data subscription topic
- Save and enable the subscription topic
- Get subscribed data with Java SDK
- Check the data consumption results

## Step 1. Create and configure a data subscription topic
Log in EnOS Console and select the **Subscription Service** module. All the subscription topics created for the current organization are listed in the table. Take the following steps to create and configure an alert data subscription topic.

1. **Create topic**: Click the **New Subscription** button and complete the configuration for the topic. For this guide, select **Alert Data Subscription** as the type.
2. **Subscription ID**: Choose to input or generate an ID for the subscription topic.
3. **Select SA account**: Each consumer instance must have an associated SA account, which can be generated by registering an application on EnOS. For instructions, see [Managing Applications](https://www.envisioniot.com/docs/app-development/en/latest/managing_apps.html).
4. **Select customers to be subscribed**: Each SA can access the data of multiple customers (through purchasing applications). Select the customers whose data are to be subscribed to.
5. **Set model filter**: Select the model to be subscribed to. For this guide, select *testModel*. The subscription system will filter alert data to meet the specified condition.
6. **Set device tag filter**: Specify tags of devices so that data of the selected devices will be subscribed to. 

## Step 2. Save and enable the subscription topic
After the subscription topic is configured, click **Save** to save the configuration. On the **Data Subscription** page, find the saved topic, click the **Enable** icon to start the subscription topic.

## Step 3. Get subscribed data with Java SDK
EnOS provides Java SDK to help developers with offline application development and data consumption.
- Download the Java SDK on [GitHub]() and install it in the IDE; or add [Maven dependency]() for the SDK. See the following example:

  
```
<dependency>
  <groupId>com.envisioniot</groupId>
  <artifactId>subscribe</artifactId>
  <version>2.0.0</version>
</dependency>
```
- Use IDE for offline application development. See the following code sample:

  
```
String sub_server_host ="sub_server_host";
String sub_server_port ="sub_server_host";
String accessKey ="sub_server_host";
String accessSecret ="sub_server_host";
/* service */
EOSClient eosClient = new EOSClient(sub_server_host,sub_server_port, accessKey, accessSecret);
IAlertService alertService = eosClient.getAlertService();

/* handler */
IAlertHandler alertHandler = new IAlertHandler(){
    @Override
    public void eventRead(Event event) {
        System.out.println(event);
    }
};

/* subscribe */
alertService.subscribe(alertHandler, subId);

/* subscribe with consumer group */
alertService.subscribe(alertHandler, subId, consumerGroup);
```
## Step 4. Check the data consumption results
Run the application for data consumption and check the data consumption results in the logs of the application.
